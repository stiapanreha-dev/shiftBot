Задание на проектирование телеграм бота:

Описание проекта
У бота должен быть следующий flow:
После прохождения flow пользователем БОТ должен записывать введенные им данные в Google Таблицу, помимо этого он должен записать дату взаимодействия пользователя с ним в соответствующее поле Date, это не системная дата пользователя, это должна быть дата соответствующая североамериканскому восточному времени (UTC -5), я предполагаю, что данную информацию необходимо будет подтягивать с какого-то сайта с временными зонами после каждого пользовательского запроса или пройденного flow. Будем это называть серверным временем, дата должна записываться в формате ГГГГ/ММ/ДД ЧЧ/ММ/СС . Хотелось бы, чтобы на каждом шаге flow у пользователя была возможность вернуться к предыдущему шагу.
1) Сотрудник начинает взаимодействие с ботом
2) Бот выводит сообщение с выбором даты начала смены, имеются два варианта: 1) Серверное время - 1; 2) Серверное время. Далее бот выводит сообщение с выбором времени начала смены, он должен быть реализован в виде кнопок инлайн клавиатуры, 3 ряда кнопок с 4-мя вариантами времени, например если рассматривать дневное время, то есть с 12 AM до 11 AM, то первый ряд кнопок будет в себя включать: 12 AM, 1 AM, 2 AM, 3 AM. Нужно будет еще добавить 13-ую кнопку, которая будет переводить пользователя на сообщение с вечерним временем суток, по структуре там будет все тоже самое, но соответственно вместо AM бдует PM. Выбранное значение должно быть записано в соответствующий столбец под названием Clock in в Google Таблице в вышеуказанном формате серверного времени, то есть ГГГГ/ММ/ДД (тут будет выбранная пользователем дата) ЧЧ/ММ/СС (тут должно быть выбранное пользователем время).
3) На данном шаге БОТ не предоставляет выбор даты, она будет соответствовать дате серверного времени. Далее бот выводит сообщение с выбором времени окончания смены. Тут все то же самое, что и в предыдущем пункте. Выбор тот же самый, но значение должно быть записано в соответствующий столбец Clock out в Google таблице. Необходимо сохранить формат времени как на предыдущем шаге.
4) Бот выводит сообщение с вариантами выбора продуктов. Это должно быть так же реализовано в виде кнопок инлайн-клавиатуры, наименование каждой кнопки соответствует наименованию продукта. 
5) Указание заработанной с продукта суммы, пользователь ее вводит вручную. Бот записывает данное значение  записывается в соответствующие поле с продуктом, выбранным на предыдущем шаге, то есть у каждого продукта свое поле
6) Бот дает выбор пользователю завершить формирование смены, или же вернуться к 4-му шагу, чтобы добавить еще один продукт, который он продал за смену, наименование у кнопки будет "Add model". В таком случае еще одно поле с продуктом будет заполнено значением в виде суммы, указанной на предыдущем шаге
7) После завершения формирования смены БОТ должен сгенерировать идентификатор смены, он будет генерироваться по принципу автоинкремента в БД, то есть ID предыдущей записи + 1, это значение будет записываться в соответствующее поле ID. Помимо этого необходимо записать в поле EmployeeId telegramId пользователя, а также в поле EmployeeName username из телеграма. В завершении бот должен выводить информацию о сформированной смене в следующем виде:
1) ID смены
2) Дата формирования смены (поле Date из Google таблицы)
3) Username пользователя (поле EmployeeName)
4) Clock in - дата начала смены
5) Clock out - дата окончания смены
6) Model (поля с наименованием продуктов) и выручка на нем (поле total sales)
***Если моделей несколько то выводить их построчно друг за другом***
7) Total sales (поле total sales) - общая выручка с продаж 
8) Net sales (поле Net sales)  - общая выручка за вычетом комиссии
9) Made during this shift (поле total made) - общий заработок за смену

8) Хотелось бы, чтобы у пользователя была возможность отредактировать смену, он может отредактировать  данные, с которыми он взаимодействовал, то есть Clock in (начало смены), Clock out (окончание смены) и Total Sales. В таком случае поля в данной записи будут изменены на новые значения. Необходимо, чтобы при вызове данной операции выводились 3 последних  смены (записи) сотрудника (поле EmployeeId)  относительно серверного времени (поле Date). Если пользователь будет редактировать поле Clock in (начало смены), где пользователь выбирал ДАТУ начала смены, либо Серверная дата -1, либо Серверная дата, то в таком случае будет браться не сегодняшняя серверная дата, а серверная дата на момент формирования записи (смены), то есть поле Date записи. В Clock out будет эта же дата. 


